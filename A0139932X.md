# A0139932X
###### \docs\DeveloperGuide.md
``` md
#### Use case: UC10 Change save file path command
   Actor:User
   
**MSS**

1. User request to change file directory
2. System will update the file directory on the config

**Extension**

	1a. Invalid file path
	>1a1. System shows an error message
	Use case ends.


#### Use case: UC09 Undo last executed command
   Actor: User

**MSS**

1. User requests to undo last executed command 
2. System will restore task manager before command was executed 
Use Case end.

**Extension**

    1a. There is nothing to undo
    >1a1. System shows an error message
    Use case finishes.
```
###### \docs\DeveloperGuide.md
``` md
#### Use case: UC10 Change save file path command
   Actor:User
   
**MSS**

1. User request to change file directory
2. System will update the file directory on the config

**Extension**

	1a. Invalid file path
	>1a1. System shows an error message
	Use case ends.
	
```
###### \docs\DeveloperGuide.md
``` md
## Appendix E : Product Survey

Product 1: Google Keep

Pros
<ul>
<li>Simple to use</li>
<li>available in Web and Andriod</li>
<li>Consistently sync  if any changes make to the notepad</li>
</ul>

Cons
<ul>
<li>No Calender View</li>
<li>Does not support recurring task or sub task</li>
</ul>

Product 2: Wunderlist

Pros
<ul>
<li>Able to sort by due date</li>
<li>Can fliter by date range</li>
<li>Interface is elegant</li>
</ul>

Cons
<ul>
<li>Does not notified by the software but through email</li>
<li>No options for subtasks or subcontexts</li>
<li>No start date or repeat options for tasks</li>
</ul>

Product 3: Any.do

Pros
<ul>
<li>Support recurring task</li>
<li>Clean interface and intuitive</li>
<li>Able to sync between web and mobile</li>
</ul>

Cons
<ul>
<li>no alarm supported</li>
<li>Internet is required</li>
</ul>

```
###### \docs\UserGuide.md
``` md
<a id="save_storage" class="anchor" aria-hidden="true">
#### Change the file directory stored: `save`
Change the folder path name
Format: `save folderpath`

Example:
* `save C:\\Users\\<username>\\Desktop\\CS2103 Tutorial`.<br>


<a id="find_substring" class="anchor" aria-hidden="true">
#### Find an event: `find`
Find an event on the list task according to the Substring based on the TITLE
Format: `find KEYWORD`

Example:
* `find work`.
RETURNS any Title that contains 'work'

```
###### \src\main\java\seedu\task\commons\util\StringUtil.java
``` java
    /**
     * Helper functions for handling strings.
     */
    public class StringUtil {
        public static boolean containsIgnoreCase(String source, String query) {
        String[] split = source.toLowerCase().split("\\s+");
        List<String> strings = Arrays.asList(split);
        return strings.stream().filter(s -> s.contains(query.toLowerCase())).count() > 0;
    }
```
###### \src\main\java\seedu\task\logic\commands\SaveCommand.java
``` java
package seedu.task.logic.commands;

import java.io.IOException;

import seedu.task.commons.core.Config;
import seedu.task.commons.util.ConfigUtil;
import seedu.task.commons.util.StringUtil;
import seedu.task.storage.StorageManager;


/**
 * Save storage file to a specific folder.
 */
public class SaveCommand extends Command {

public static final String COMMAND_WORD = "save";

public static final String MESSAGE_USAGE = COMMAND_WORD + ": Change location of the save file "
        + "Parameters: FolderPath"
        + " Example: " + COMMAND_WORD
        + " C:\\Users\\<username>\\Desktop\\CS2103 Tutorial";

    private String changePathLink;
    
    public SaveCommand(String arguments){
        
        this.changePathLink = arguments;
    }
    
    
    @Override
    public CommandResult execute() {
        
        /*
         * Change the folder path and update config.json
         */
        Config config = new Config();
        String configFilePathUsed = Config.DEFAULT_CONFIG_FILE;
        
        try{
            config.setTaskManagerFilePath(changePathLink + "/data/taskmanager.xml");
            ConfigUtil.saveConfig(config, configFilePathUsed);
            
         
            new StorageManager(config.getTaskManagerFilePath(), config.getUserPrefsFilePath());
            
            return new CommandResult("Change save path:" + changePathLink + " Updated");
            
        }
        
        catch(IOException e){
			//remove this command from list for undo
			model.getCommandForUndo();
            return new CommandResult("Failed to save config file: "+ StringUtil.getDetails(e));
        }
        
    }
    
```
###### \src\main\java\seedu\task\logic\parser\Parser.java
``` java
	private static final Pattern SAVE_COMMAND_FORMAT = Pattern.compile("(?<path>[^/]+)");
```
###### \src\main\java\seedu\task\logic\parser\Parser.java
``` java
			// to validate start date is before due date

			Date dueDate, startDate;
			if (!isInputPresent(argsTokenizer.getValue(startDatePrefix)).equals("Not Set")
					&& (!isInputPresent(argsTokenizer.getValue(dueDatePrefix)).equals("Not Set"))) {

				// validate start date format
				if (!checkDateFormate(argsTokenizer.getValue(startDatePrefix))) {
					throw new IllegalValueException(StartDate.MESSAGE_DATE_CONSTRAINTS);
				} else {
					startDate = parseStartDate(argsTokenizer.getValue(startDatePrefix));
				}
				// validate due date format
				if (!checkDateFormate(argsTokenizer.getValue(dueDatePrefix))) {
					throw new IllegalValueException(DueDate.MESSAGE_DATE_CONSTRAINTS);
				} else {
					dueDate = parseDueDate(argsTokenizer.getValue(dueDatePrefix));
				}

				if (startDate.compareTo(dueDate) > 0) {
					return new IncorrectCommand(
							String.format(MESSAGE_INVALID_COMMAND_FORMAT, AddCommand.MESSAGE_INVALID_DATE));
				}

			}
```
###### \src\main\java\seedu\task\logic\parser\Parser.java
``` java
	public boolean checkDateFormate(String dateToValidate) {
		if (!DueDate.isValidDateTime(dateToValidate) && !DueDate.isValidDate(dateToValidate)) {
			return false;
		}
		return true;
	}

	public Date parseDueDate(String dateToValidate) throws ParseException {
		Date date;

		if (DueDate.isValidDate(dateToValidate)) {
			date = DATE_FORMAT.parse(dateToValidate + " 23:59");
		} else {
			date = DATE_FORMAT.parse(dateToValidate);
		}

		return date;
	}

	public Date parseStartDate(String dateToValidate) throws ParseException {
		Date date;

		if (StartDate.isValidDate(dateToValidate)) {
			date = DATE_FORMAT.parse(dateToValidate + " 08:00");
		} else {
			date = DATE_FORMAT.parse(dateToValidate);
		}

		return date;
	}
```
###### \src\main\java\seedu\task\logic\parser\Parser.java
``` java
	/**
	 * Parses arguments in the context of the save task command.
	 *
	 * @param args
	 *            full command args string
	 * @return the prepared command
	 */
	private Command prepareSave(String args) {
		// Validate arg string format
		final Matcher matcher = SAVE_COMMAND_FORMAT.matcher(args.trim());
		if (!matcher.matches()) {
			return new IncorrectCommand(String.format(MESSAGE_INVALID_COMMAND_FORMAT, SaveCommand.MESSAGE_USAGE));
		}
		// String storagePath = args.trim().concat(".xml");
		return new SaveCommand(args.trim());

	}

}
```
###### \src\test\java\seedu\address\commons\util\ConfigUtilTest.java
``` java
    @Test
    public void read_fileInOrder_successfullyRead() throws DataConversionException {
        Config expected = getTypicalConfig();

        Config actual = read("TypicalConfig.json").get();
        assertEquals(expected, actual);
    }

    @Test
    public void read_valuesMissingFromFile_defaultValuesUsed() throws DataConversionException {
        Config actual = read("EmptyConfig.json").get();
        assertEquals(new Config(), actual);
    }

    @Test
    public void read_extraValuesInFile_extraValuesIgnored() throws DataConversionException {
        Config expected = getTypicalConfig();
        Config actual = read("ExtraValuesConfig.json").get();

        assertEquals(expected, actual);
    }

    private Config getTypicalConfig() {
        Config config = new Config();
        config.setAppTitle("Typical App Title");
        config.setLogLevel(Level.INFO);
        config.setUserPrefsFilePath("C:\\preferences.json");
        config.setTaskManagerFilePath("data/taskmanager.xml");
        config.setTaskManagerName("MyTaskManager");
        return config;
    }
```
###### \src\test\java\seedu\address\logic\LogicManagerTest.java
``` java
    @Test
    public void execute_find_onlyMatchesFullWordsInNames() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        Task pTarget1 = helper.generateTaskWithName("bla bla KEY bla");
        Task pTarget2 = helper.generateTaskWithName("bla KEY bla bceofeia");
        Task p1 = helper.generateTaskWithName("KE Y");
        Task pTarget3 = helper.generateTaskWithName("KEYKEYKEY sduauo");

        List<Task> fourTasks = helper.generateTaskList(p1, pTarget1, pTarget2, pTarget3);
        TaskManager expectedAB = helper.generateTaskManager(fourTasks);
        List<Task> expectedList = helper.generateTaskList(pTarget1, pTarget2, pTarget3);
        helper.addToModel(model, fourTasks);

        assertCommandBehavior("find KEY",
                Command.getMessageForTaskListShownSummary(expectedList.size()),
                expectedAB,
                expectedList);
    }
    //author

    @Test
    public void execute_find_isNotCaseSensitive() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        Task p1 = helper.generateTaskWithName("bla bla KEY bla");
        Task p2 = helper.generateTaskWithName("bla KEY bla bceofeia");
        Task p3 = helper.generateTaskWithName("key key");
        Task p4 = helper.generateTaskWithName("KEy sduauo");

        List<Task> fourTasks = helper.generateTaskList(p3, p1, p4, p2);
        TaskManager expectedAB = helper.generateTaskManager(fourTasks);
        List<Task> expectedList = fourTasks;
        helper.addToModel(model, fourTasks);

        assertCommandBehavior("find KEY",
                Command.getMessageForTaskListShownSummary(expectedList.size()),
                expectedAB,
                expectedList);
    }

    @Test
    public void execute_find_matchesIfAnyKeywordPresent() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        Task pTarget1 = helper.generateTaskWithName("bla bla KEY bla");
        Task pTarget2 = helper.generateTaskWithName("bla rAnDoM bla bceofeia");
        Task pTarget3 = helper.generateTaskWithName("key key");
        Task p1 = helper.generateTaskWithName("sduauo");

        List<Task> fourTasks = helper.generateTaskList(pTarget1, p1, pTarget2, pTarget3);
        TaskManager expectedAB = helper.generateTaskManager(fourTasks);
        List<Task> expectedList = helper.generateTaskList(pTarget1, pTarget2, pTarget3);
        helper.addToModel(model, fourTasks);

        assertCommandBehavior("find key rAnDoM",
                Command.getMessageForTaskListShownSummary(expectedList.size()),
                expectedAB,
                expectedList);
    }
    //author A0139932X
    @Test
    public void execute_save_invalidArgsFormat() throws Exception {
        String expectedMessage = String.format(MESSAGE_INVALID_COMMAND_FORMAT, SaveCommand.MESSAGE_USAGE);
        assertCommandBehavior("save", expectedMessage);
    }
    
    @Test
    public void execute_save_successful() throws Exception {

     
        Config config = new Config();
        
        String expectedMessage = "Change save path:.\\test Updated";
        assertCommandBehavior("save .\\test", expectedMessage);
        config.setTaskManagerFilePath("data/taskmanager.xml");
        ConfigUtil.saveConfig(config, "config.json");
        
    }
```
